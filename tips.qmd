---
title: "Restaurant Takings & Tips"
author: "Gary Kitchen"
format: 
  dashboard:
    theme: darkly
jupyter: python3
---

```{python}

import plotly.express as px, pandas as pd
df = px.data.tips()
cats = ['Thur', 'Fri', 'Sat', 'Sun']
df['day'] = pd.Categorical(df['day'], categories=cats, ordered=True)
df = df.sort_values('day')

tips_total = df['tip'].sum().round(2)
bills_total = df['total_bill'].sum()
tips_percent =(100*tips_total/bills_total).round(2)

```

# Dashboard

## Row

```{python}
#| component: valuebox
#| title: Total Tips
dict(
    icon = "gift",
    color = "yellow",
    value = tips_total
)
```


```{python}
#| component: valuebox
#| title: Total Takings
dict(
    icon = "credit-card",
    color = "blue",
    value = bills_total
)
```

```{python}
#| component: valuebox
#| title: Average Tip
dict(
    icon = "percent",
    value = tips_percent,
    color = "green"
)
```

## Row

```{python}
#| component: chart
#| title: Total Tips by Day
fig = px.histogram(df, y='tip', x='day', color = 'sex', template = "plotly_dark")
fig.update_layout(showlegend=False)
```

```{python}
#| component: chart
#| title: Total Tips by Mealtime
fig = px.histogram(df, y='tip', x='time', color = 'sex', template = "plotly_dark").update_xaxes(categoryorder = 'total ascending')
fig.update_layout(showlegend=False)
```

## Row

```{python}
#| component: chart
#| title: Total Takings by Day
fig = px.histogram(df, y='total_bill', x='day', color = 'sex', template = "plotly_dark")
fig.update_layout(showlegend=False)
```

```{python}
#| component: chart
#| title: Total Takings by Mealtime
fig = px.histogram(df, y='total_bill', x='time', color = 'sex', template = "plotly_dark").update_xaxes(categoryorder = 'total ascending')
fig.update_layout(showlegend=False)
```

# Data

```{python}
#| component: table
df.sort_index(inplace=True)
pd.set_option('display.max_rows', None)
df.style.bar()

```